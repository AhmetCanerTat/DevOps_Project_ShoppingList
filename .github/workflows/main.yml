on:
  push:
    branches:
    - main
    - release/*
  workflow_dispatch:
    
jobs:
  my_job:
    name: deploy to staging
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v4
      - run: |
          docker image rm shoppinglist:0.0.1 || true
          docker build -t shoppinglist:0.0.1 -f Dockerfile .
        name: Build
      - run: |
          docker container rm build-container || true 
          docker run --name build-container shoppinglist:0.0.1
         
        name: Run
      - run: |
          docker cp build-container:/app/build .
          ls -al
        name: Copy

    
